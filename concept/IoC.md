依赖注入DI(Dependency Injection) 或 控制反转IoC(Inversion of Control)
=================================================================

```php

class A {

}

```
像这种非自己主动初始化依赖，而通过外部来传入依赖的方式，我们就称为依赖注入

原本需要自己主动初始化的依赖，改为通过外部传入依赖的方式实现，就称为依赖注入。

### 好处
* 解耦

#### 什么是IoC
`把复杂系统分解成相互作用的对象，这些对象类通过封装后，内部实现对外部是透明的，从而降低了解决问题的复杂度,而且可以灵活的被重用和扩展。`  
对象A获得依赖对象B的过程,由主动行为变为了被动行为，控制权颠倒过来了，这就是“控制反转”这个名称的由来。

借助于`第三方 IoC容器`实现具有依赖关系的对象之间的解耦



``获得依赖对象的过程被反转了,控制被反转之后，获得依赖对象的过程由自身管理变为了由IOC容器主动注入``

依赖注入(DI)和控制反转(IOC)是从不同的角度的描述的同一件事情，就是指通过引入IOC容器，利用依赖关系注入的方式，实现对象之间的解耦。

对象A依赖于对象B,当对象A需要用到对象B的时候，IOC容器就会立即创建一个对象B送给对象A    
IOC容器就是一个对象制造工厂，你需要什么，它会给你送去，你直接使用就行了，而再也不用去关心你所用的东西是如何制成的，也不用关心最后是怎么被销毁的，这一切全部由IOC容器包办。

### IoC容器技术剖析
IOC中最基本的技术就是`反射[映射](Reflection)`编程。  
有关反射的概念和用法:`通俗来讲就是根据给出的类名(字符串方式)来动态地生成(创建)对象`。这种编程方式可以让对象在生成时才决定到底是哪一种对象。   
现在的反射技术经过改良优化，已经非常成熟，反射方式生成对象和通常对象生成方式，速度已经相差不大了，大约为1-2倍的差距。  
`我们可以把IOC容器的工作模式看做是工厂模式的升华`，可以把IOC容器看作是一个工厂，这个工厂里要生产的对象都在配置文件中给出定义，然后利用编程语言的的反射编程，根据配置文件中给出的类名生成相应的对象。从实现来看，IOC是把以前在工厂方法里写死的对象生成代码，改变为由配置文件来定义，也就是把工厂和对象生成这两者独立分隔开来，目的就是提高灵活性和可维护性。

### 使用依赖注入的注意事项 
* 生成对象的步骤变得复杂，会感觉不太直观，增加在团队学习和培训成本
* 反射编程，在运行效率上有一定损耗